---
import Button from '~/components/ui/Button.astro';

interface Props {
  url?: string;
  data_luma_event_id?: string;
}

const { url, data_luma_event_id } = Astro.props;
const defaultUrl = 'https://luma.com/bwib';
const isDefault = !url;
const finalUrl = url ?? defaultUrl;
const buttonText = isDefault ? 'Link coming soon â€” click to subscribe to our calendar' : 'Sign Up';
---

{
  data_luma_event_id && url ? (
    <>
      <center class="mt-8 flex flex-col items-center gap-4">
        <Button
          variant="primary"
          href={finalUrl}
          text="Register for Event"
          class="bg-accent-warm dark:bg-lime-400 hover:bg-[#FF0099] dark:hover:bg-lime-500 text-dark dark:text-black hover:text-white dark:hover:text-black border-accent-warm dark:border-lime-400 hover:border-[#FF0099] dark:hover:border-lime-500"
        />
        <Button
          variant="primary"
          href={`https://luma.com/event/${data_luma_event_id}`}
          text="Register for In-Person Site"
          class="bg-accent-warm dark:bg-lime-400 hover:bg-[#FF0099] dark:hover:bg-lime-500 text-dark dark:text-black hover:text-white dark:hover:text-black border-accent-warm dark:border-lime-400 hover:border-[#FF0099] dark:hover:border-lime-500"
          data-luma-action="checkout"
          data-luma-event-id={data_luma_event_id}
        />
      </center>
      <script id="luma-checkout" src="https://embed.lu.ma/checkout-button.js" is:inline />
    </>
  ) : data_luma_event_id ? (
    <>
      <center class="mt-8">
        <Button
          variant="primary"
          href={finalUrl}
          text="Register for Event"
          class="bg-accent-warm dark:bg-lime-400 hover:bg-[#FF0099] dark:hover:bg-lime-500 text-dark dark:text-black hover:text-white dark:hover:text-black border-accent-warm dark:border-lime-400 hover:border-[#FF0099] dark:hover:border-lime-500"
          data-luma-action="checkout"
          data-luma-event-id={data_luma_event_id}
        />
      </center>
      <script id="luma-checkout" src="https://embed.lu.ma/checkout-button.js" is:inline />
    </>
  ) : (
    <center>
      <Button
        variant="primary"
        href={finalUrl}
        text={buttonText}
        class="bg-accent-warm dark:bg-lime-400 hover:bg-[#FF0099] dark:hover:bg-lime-500 text-dark dark:text-black hover:text-white dark:hover:text-black border-accent-warm dark:border-lime-400 hover:border-[#FF0099] dark:hover:border-lime-500"
      />
    </center>
  )
}
