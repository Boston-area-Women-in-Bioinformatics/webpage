---
import Button from '~/components/ui/Button.astro';

interface Props {
  url?: string;
  data_luma_event_id?: string;
}

const { url, data_luma_event_id } = Astro.props;
const defaultUrl = 'https://luma.com/bwib';
const isDefault = !url;
const finalUrl = url ?? defaultUrl;
const buttonText = isDefault ? 'Link coming soon â€” click to subscribe to our calendar' : 'Sign Up';
---

{
  data_luma_event_id ? (
    <>
      <center class="mt-8">
        <Button
          variant="primary"
          href={finalUrl}
          text="Register for Event"
          data-luma-action="checkout"
          data-luma-event-id={data_luma_event_id}
        />
      </center>
      <script id="luma-checkout" src="https://embed.lu.ma/checkout-button.js" is:inline />
    </>
  ) : (
    <center>
      <Button variant="primary" href={finalUrl} text={buttonText} />
    </center>
  )
}
