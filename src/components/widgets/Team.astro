---
// Team component - displays team members with avatars and social links
import SocialLinks from '~/components/ui/SocialLinks.astro';

interface Props {
  members: Array<{
    avatar?: string;
    name: string;
    nameLink?: string;
    title?: string;
    social?: {
      website?: string;
      instagram?: string;
      facebook?: string;
      twitter?: string;
      bluesky?: string;
      linkedin?: string;
      github?: string;
    };
  }>;
}

const { members } = Astro.props;

// Rainbow colors inspired by the WIB logo
const rainbowColors = [
  'bg-purple-500',
  'bg-pink-500',
  'bg-rose-500',
  'bg-orange-500',
  'bg-amber-500',
  'bg-yellow-500',
  'bg-green-500',
  'bg-sky-500',
];

// Helper function to get initials from a name
function getInitials(name: string): string {
  return name
    .split(' ')
    .map((word) => word.charAt(0).toUpperCase())
    .slice(0, 2)
    .join('');
}

// Track color index only for members without avatars
let colorIndex = 0;
---

{
  members.map((member) => {
    const bgColor = !member?.avatar ? rainbowColors[colorIndex++ % rainbowColors.length] : '';
    return (
      <div class="text-center text-gray-500 dark:text-slate-400">
        {member?.avatar ? (
          <img
            class="mx-auto mb-4 w-36 h-36 rounded-full object-cover object-center"
            src={member.avatar}
            alt={`${member?.name} - avatar`}
          />
        ) : (
          <div class:list={['mx-auto mb-4 w-36 h-36 rounded-full flex items-center justify-center', bgColor]}>
            <span class="text-4xl font-bold text-white">{getInitials(member.name)}</span>
          </div>
        )}
        <h3 class="mb-1 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">
          {member?.nameLink ? <a href={member.nameLink}>{member.name}</a> : member.name}
        </h3>
        {member?.title && <p>{member.title}</p>}
        {member?.social && <SocialLinks social={member.social} class="justify-center mt-4" />}
      </div>
    );
  })
}
