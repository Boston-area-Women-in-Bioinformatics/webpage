---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Headline from '~/components/ui/Headline.astro';
import { Icon } from 'astro-icon/components';
import type { Committee } from '~/types/committee';

interface Props {
  title?: string;
  subtitle?: string;
  tagline?: string;
  committees: Committee[];
  id?: string;
  isDark?: boolean;
  classes?: Record<string, string>;
  bg?: string;
}

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline = await Astro.slots.render('tagline'),
  committees = [],
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-5xl ${classes?.container ?? ''}`} bg={bg}>
  <Headline
    title={title}
    subtitle={subtitle}
    tagline={tagline}
    classes={(classes?.headline || {}) as Record<string, string>}
  />

  <div class="grid mx-auto gap-8 md:gap-y-12 sm:grid-cols-2">
    {
      committees.map((committee) => (
        <div class="intersect-once motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade flex items-center justify-center">
          <a
            href={`/about/committees/${committee.id}`}
            class="committee-card flex flex-row max-w-md w-full text-left p-4 rounded-lg border-2 border-transparent hover:border-primary hover:shadow-lg transition-all duration-200 cursor-pointer bg-transparent"
            aria-label={`View details for ${committee.title}`}
          >
            <div class="flex justify-center">
              {committee.icon && (
                <div class="text-white bg-primary rounded-full w-10 h-10 p-2 md:w-12 md:h-12 md:p-3 mr-4 rtl:ml-4 rtl:mr-0 flex items-center justify-center">
                  <Icon name={committee.icon} class="w-6 h-6" />
                </div>
              )}
            </div>
            <div class="mt-0.5 flex-1">
              <h3 class="text-xl font-bold text-gray-900 dark:text-slate-100">{committee.title}</h3>
              <p class="mt-3 text-muted dark:text-slate-300">{committee.description}</p>
            </div>
          </a>
        </div>
      ))
    }
  </div>
</WidgetWrapper>
