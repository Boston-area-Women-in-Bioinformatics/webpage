---
interface Props {
  date: Date;
  endDate?: Date;
}

const { date, endDate } = Astro.props;

const startDate = new Date(date);

const formatSingle = (d: Date) =>
  d.toLocaleTimeString('en-us', {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit',
    hour12: true,
    timeZone: 'America/New_York',
    timeZoneName: 'short',
  });

const formatDateOnly = (d: Date) =>
  d.toLocaleDateString('en-us', {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
    timeZone: 'America/New_York',
  });

const isMultiDay = endDate && new Date(endDate).toDateString() !== startDate.toDateString();
---

{
  isMultiDay ? (
    <time datetime={startDate.toISOString()}>
      {formatDateOnly(startDate)} â€“ {formatDateOnly(new Date(endDate))}
    </time>
  ) : (
    <time datetime={startDate.toISOString()}>
      {formatSingle(startDate)}
    </time>
  )
}
