---
import { getCollection, render } from 'astro:content';
import EventLayout from '~/layouts/EventLayout.astro';

export async function getStaticPaths() {
  // 1. Fetch all event entries from your Astro content collection (src/content/config.ts)
  const events = await getCollection('event');

  // 2. Map each event to a static path
  return events.map((meeting) => ({
    params: { slug: meeting.id },
    props: { meeting },
  }));
}

const { meeting } = Astro.props;
const { Content } = await render(meeting);
---

<EventLayout
  frontmatter={meeting.data}
  date={meeting.data.dateTime}
  location={meeting.data.location}
  imgsrc={meeting.data.image.src}
  imgalt={meeting.data.image.alt}
  url={meeting.data.url}
  imgpos={meeting.data.imgpos}
  cost={meeting.data.cost}
  gallery={meeting.data.gallery}
>
  <Content />
</EventLayout>

<style>
  .title-clamp {
    font-size: clamp(20px, 6vw, 70px);
    line-height: 1;
  }
</style>
