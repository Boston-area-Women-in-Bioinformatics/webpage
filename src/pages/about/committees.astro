---
import CommitteeGrid from '~/components/widgets/CommitteeGrid.astro';
import Layout from '~/layouts/PageLayout.astro';
import { SITE } from '~/config/site/config.js';
import { getCollection } from 'astro:content';
import Headline from '~/components/ui/Headline.astro';

const metadata = {
  title: SITE.title,
  description: SITE.description,
  dontUseTitleTemplate: true,
};

// Load committees from content collection
const committeeEntries = await getCollection('committee');

// Transform to the format expected by CommitteeGrid
const committees = committeeEntries.map((entry) => ({
  id: entry.data.id,
  title: entry.data.title,
  description: entry.data.description,
  icon: entry.data.icon,
}));
---

<Layout metadata={metadata}>
  <Headline
    title="Committees"
    subtitle="Our organization is powered by a dedicated group of volunteers working across committees to support our mission and community."
  />

  <CommitteeGrid committees={committees} />
</Layout>
